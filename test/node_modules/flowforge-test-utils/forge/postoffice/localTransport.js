/**
 * A custom transport for nodemailer that captures mail sent so it can be
 * checked.
 */
class LocalTransport {
    constructor(opts = {}) {
        this.opts = opts
        this.messages = [];
    }
    getTransport() {
        return {
            name: 'FlowForgeInternalTestTransport',
            version: '0.1.0',
            send: (mail, callback) => {
                this.messages.push(mail.data);
                callback(null, true);
            }
        }
    }

    getMessageQueue() {
        return this.messages
    }

    count() {
        return this.messages.length
    }
}

module.exports = {
    LocalTransport,

}
